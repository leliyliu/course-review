[TOC]

# 计算机接口技术

---



## 第一章

### 概论

微机接口是微处理器CPU与“外部世界”的连接电路，是CPU与外界进行信息交换的中转站。其中，外部世界：除CPU本身以外的所有设备或电路，包括存储器、I/O设备、测量设备、通讯设备、多媒体设备等。

![hierarchical](fig/re1-1.png)

![data_port](D:\leliy\github_project\course-review\undergraduate\junior_first\computer interface technology\review\fig\re1-2.png)

![status_port](fig/re1-3.png)

![control_port](fig/re1-4.png)

一个传统的电脑主机中，包括了一些并口连接器，串口连接器，USB接口，鼠标接口（但是现在大多数鼠标也都采用USB口），还包括南桥和北桥芯片组，IDE接口，PCI(PCIE)插槽，ISA插槽，AGP插槽，ROM 和 BIOS等等。

## 第二章

### 微处理器导论

可以查看8086的外部引脚如下图所示：

![8086](fig/re2-1.png)

其中，主要包括了这样几个部分：

+ GND ，CLK ，VCC 等基本控制信号
+ AD $\rightarrow$ 其中可以作为16位数据线和20位地址线。

### 8086的总线周期

### 基于某CPU的总线设计

### 8086系统总线形成

#### 两种模式下功能相同的引脚

1. $AD_{15} \sim AD_0$ 地址数据复用信号，双向，三态。
2. $A_{19}/S_6 \sim A_{16}/S_3$ 地址状态复用信号，输出，三态。$S_6$指示8086微处理器当前是否使用总线，$S_5$指示中断允许标志位的状态。$S_4,S_3$指明当前正使用的段寄存器，分别对应一个段寄存器。“0,0”，“0,1”，“1,0”，“1,1”分别对应ES,SS,CS,DS
3. $\overline{BHE}/S_7$ 控制，状态复用信号，输出，三态。$\overline{BHE}$为低电平时，表示在数据总线高8位上可以进行数据传送。
4. $\overline{RD}$,读控制信号，输出，三态。低电平有效，从存储器或者IO读出数据到CPU。
5. READY 表示准备就绪，输入，当其有效，则不需要插入等待时钟。
6. INTR 中断请求信号，输入，可屏蔽中断请求。
7. $\overline{TEST}$ 测试信号，输入
8. NMI 非屏蔽中断请求信号，输入
9. CLK 时钟输入信号
10. $V_{CC}$ 电源输入引脚
11. GND 接地引脚
12. $MN/\overline{MX}$ 组态选择信号，输入，高位表示在最小模式，低位表示在最大模式

#### 最小模式下系统总线的形成

##### 控制总线

控制总线包括$\overline{WR},\overline{RD},M/\overline{IO}$之类的信号，主要是控制读写以及保持是IO读写状态还是为存储器操作。

##### 地址总线

包括$A_{19} \sim A_{16}$ 和 $A_{15} \sim A_{0}$等地址。

##### 数据总线

包括$D_{15} \sim D_0$

| 总线              | 作用                                  |
| ----------------- | ------------------------------------- |
| $\overline{WR}$   | 写控制信号，输出，三态                |
| $M/\overline{IO}$ | 存储器操作/输入输出操作执行信号，三态 |
| $\overline{INTA}$ | 中断响应信号，输出                    |
| $ALE$             | 地址锁存允许信号，输出，三态          |
| $DT/\overline{R}$ | 数据收发控制信号，输出，三态          |
| $\overline{DEN}$  | 数据允许信号，输出，三态              |
| $HOLD$            | 总线持有请求信号，输入                |
| $HLDA$            | 总线持有响应信号，输出                |



#### 最大模式下系统总线的形成

| 总线信号                                          | 作用                                          |
| ------------------------------------------------- | --------------------------------------------- |
| $\overline{S_1}、\overline{S_2} 、\overline{S_3}$ | 状态信号，输出，三态                          |
| $\overline{LOCK}$                                 | 总线锁定信号，输出，三态 封锁其它总线控制设备 |
| $QS_1、QS_0$                                      | 指令队列状态信号，输入，了解队列当前状态      |
| $\overline{RQ_0 / GT_0} / \overline{RQ_0 / GT_0}$ | 请求/同意信号，双向，三态                     |

当8086工作在最大模式下时，一些控制信号需要借助于总线控制器8288产生。

总线控制器8288接收8086在最大模式下工作时产生的工作状态编码信号$\overline{s_2},\overline{s_1},\overline{s_0}$。识别8086将要执行的总线周期类型，产生总线周期所需的相应存储器访问、IO访问、中断相应等总线命令信号以及$DEN、DT/\overline{R}、ALE$等总线控制信号。

需要引起注意的三点：

1. 存储器读/写控制信号已经与I/O读写控制信号分开
2. 存储器和I/O都具有两个写命令：一般的写命令和超前的写命令。
3. 总线控制器8288产生的DEN信号与最小模式下的极性相反，使用时需要加上一个反相器。



### 8086的总线周期

#### 8086的时序与周期

指令周期：CPU执行一条指令所需要的的时间。

总线周期：CPU为了读取指令或传送数据，进行一次数据传送的总线操作定义为一个总线周期。



**对8086来说，总线周期有6种：存储器读周期，存储器写周期，I/O读周期，I/O写周期，中断周期和取指令周期**。一个标准的总线周期有四个时钟周期：T1,T2,T3和T4。当4个时钟周期不能完成所规定的的操作时，可以插入等待时钟$T_w$

#### 8086 的读写周期过程

+ 存储器读周期 ![存储器读周期](fig/re2-2.png)
+ I/O读周期![I/O读周期](fig/re2-3.png)
+ 存储器写周期![存储器写周期](fig/re2-4.png)
+ I/O写周期![I/O写周期](fig/re2-5.png)
+ 等待时钟的插入![等待时钟的插入](fig/re2-6.png)

存储器与I/O的主要区别：

读周期：I/O端口地址只有16位，所以T1,T2期间没有出现A19 - A16

写周期：I/O端口地址只有16位，所以T1,T2期间没有出现A19 - A16

## 第三章

## 第四章

## 小键盘

## 数模转换

